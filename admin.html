<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Admin – AJE Coins</title>
<link rel="stylesheet" href="styles.css"/>
<script type="module" src="admin.js"></script>
</head>

<body>

<header class="topBar">
  <img src="assets/logo.png" class="logo">
  <span>Panel Administrativo – AJE Coins</span>
</header>

<main class="main-container">

  <section class="card">
    <h2 class="collapsible">Carga de Información <span>−</span></h2>
    <div class="card-content">
        <div class="filtros">
          <div>
            <label><strong>Usuarios (CSV):</strong></label>
            <input type="file" id="fileInput" accept=".csv"/>
            <button id="uploadBtn">Cargar Usuarios</button>
          </div>
          <div>
            <label><strong>Productos (CSV):</strong></label>
            <input type="file" id="productFileInput" accept=".csv"/>
            <button id="uploadProductBtn">Cargar Productos</button>
          </div>
        </div>
    </div>
  </section>

  <section class="card">
    <h2 class="collapsible">Inventario de Productos <span>−</span></h2>
    <div class="card-content">
        <div style="overflow-x:auto;">
          <table id="productsTable">
            <thead>
              <tr>
                <th>Producto</th>
                <th style="text-align: center;">Imagen</th>
                <th style="text-align: center;">Coins</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
    </div>
  </section>

  <section class="card">
    <h2 class="collapsible">Gestión de Usuarios (Lista Maestra) <span>−</span></h2>
    <div class="card-content">
        <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
          Eliminar a un usuario aquí borrará su acceso y todos sus coins registrados permanentemente.
        </p>
        <div style="overflow-x:auto;">
          <table id="tablaMaestraUsuarios">
            <thead>
              <tr>
                <th>Código Vendedor</th>
                <th>Nombre Completo</th>
                <th>CEDIS</th>
                <th style="text-align: center;">Acción</th>
              </tr>
            </thead>
            <tbody id="maestraBody"></tbody>
          </table>
        </div>
    </div>
  </section>

  <section class="card">
    <h2 class="collapsible">Historial de Cargas de Coins <span>−</span></h2>
    <div class="card-content">
        <div class="filtros">
          <input type="date" id="filtroFecha" style="width: auto;"/>
          <button id="btnFiltrar" style="width: auto;">Filtrar por Fecha</button>
          <button id="btnVerTodo" style="width: auto;">Ver Todo</button>
          <button id="btnExportUsers" style="width: auto;">Exportar CSV</button>
        </div>
        <div style="overflow-x:auto;">
          <table id="usersTable">
            <thead>
              <tr>
                <th>Fecha Carga</th>
                <th>Código Vendedor</th>
                <th>Nombre</th>
                <th style="text-align: center;">Coins Cargados</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
    </div>
  </section>

  <section class="card">
    <h2 class="collapsible">Historial de Canjes <span>−</span></h2>
    <div class="card-content">
        <button id="btnExport" style="margin-bottom:10px; font-size:12px; width: auto;">Exportar CSV</button>
        <div style="overflow-x:auto;">
          <table id="comprasTable">
            <thead>
              <tr>
                <th>Fecha/Hora</th>
                <th>Código Vendedor</th>
                <th>Nombre</th>
                <th>Productos</th>
                <th style="text-align: center;">Total</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
    </div>
  </section>

  <section class="card">
    <h2 class="collapsible">Consulta de Movimientos por Vendedor <span>−</span></h2>
    <div class="card-content">
        <div class="filtros">
          <input type="text" id="movCedula" placeholder="Código de Vendedor..." style="width: auto;"/>
          <button id="btnVerMov" style="width: auto;">Ver Historial</button>
          <button id="btnVerTodosMov" style="width: auto;">Ver Todos</button>
          <button id="btnExportMov" style="width: auto;">Exportar</button>
        </div>
        <div style="overflow-x:auto;">
          <table id="movTable">
            <thead>
              <tr>
                <th>Código</th>
                <th>Nombre</th>
                <th>Fecha</th>
                <th>Concepto</th>
                <th style="text-align: center;">Coins</th>
                <th style="text-align: center;">Saldo</th>
              </tr>
            </thead>
            <tbody id="movBody"></tbody>
          </table>
        </div>
    </div>
  </section>

</main>

<div id="loader" class="loader">
  <div class="spinner"></div>
  <p>Procesando información...</p>
</div>

</body>
</html>
